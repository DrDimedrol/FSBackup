принять патчи от Juri Bazhenov <jura@ppnet.ee>


Ниже список идей, на реализацию которых у меня нет времени.
----------------------------------------------------------

- Для OpenBSD tar вместо ключа -T ключ -l

- В бэкапе СУБД возможность раздельного сохранения таблиц по отдельным
  директориям ($db_dir/$table_file). Скрипт для парсинга единого дампа для
  выявления таблицы.

- При инкрементальном бэкапе хотелось бы видеть в имени файла уровень
  бэкапа, а не только дату и время. 

- Транспорт SFTP

- Локи на момент запуска, на случай если бэкап не будет выполнен за сутки или
  встретится проблемный cron демон периодически сходящий с ума (видел такой).
  По идее fsbackup будет и так ждать на flock, но лучше сделать красиво.
  (в 1.2pl2 добавлена примитивная защита от двойного запуска).

- Режим полного архива изменений: инкрементальный бэкап с бесконечным числом изменений
  и удобной структурой файлов (иерархия директорий /год/месяц/)

- Отладочный режим, list файл содержащий параметры файла (как для хешей) и код
  причины помещения или не помещения файла в бэкап. (размер уже поместил.)


- Поддержка bzip2 из коробки.

- Поддержка solaris, убрать -z ключ из tar (не помню, но похоже давно сделано).

- Вынос некорых параметров (как пример,  размер активного хеша) в конфиг.

- Возможность задания в конфиге, для одного бэкапа, указывания сразу нескольких
  назначений. Вполне вероятно, что люди захотят хранить одну копию бэкапа локально, 
  а вторую на сервере резервного копирования (через ssh), а еще одну копию через
  ftp еще на одном сервере. (сейчас решается созданием нескольких конфигов, 
  для бэкапа бэкапов)

- Бэкап в samba mounts, дикектива для разрешения следования по симлинкам
  find (\&add_to_backup, $cur_pathitem);
  find ({ wanted => \&add_to_backup, follow => 1}, $cur_pathitem);
  $File::Find::dont_use_nlink = 1;


-------------------------------------------------------

-? --quote-names в скрипт бэкапа mysql

-? в файле бэкапа директорий "mkdir" заменить на "mkdir -p" ? (несовместимо)

-? воссоздание дерева директорий или одной директории, содержимое
   которой не помещается в архив.

-? Особенности режима синхронизации: если появилась новая пустая
   директория и нет новых или измененных файлов, то новая директория не
   синхронизируется. Вопрос удаления директорий при синхронизации.

